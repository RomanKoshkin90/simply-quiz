# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –±–ª–æ–∫–∏ "–ü–æ—Ö–æ–∂–∏–µ –∞—Ä—Ç–∏—Å—Ç—ã" –∏ "–ü–æ—Ö–æ–∂–∏–µ –ø–µ—Å–Ω–∏"

## üéØ –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ PostgreSQL
psql -U postgres -d edinorok

# –í—ã–ø–æ–ª–Ω–∏ –∑–∞–ø—Ä–æ—Å—ã:
SELECT COUNT(*) FROM artist_profiles;
SELECT COUNT(*) FROM songs;
SELECT COUNT(*) FROM artist_profiles WHERE voice_embedding IS NOT NULL;
```

**–ï—Å–ª–∏ –≤—Å–µ COUNT = 0 ‚Üí –ë–î –ø—É—Å—Ç–∞—è, –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å!**

### 2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend

–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –≥–æ–ª–æ—Å–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:
```
[ANALYSIS] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 130 –∞—Ä—Ç–∏—Å—Ç–æ–≤
[PIPELINE] ‚úÖ –ê—Ä—Ç–∏—Å—Ç—ã: 3, –ü–µ—Å–Ω–∏: 10
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—à—å "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 0 –∞—Ä—Ç–∏—Å—Ç–æ–≤" ‚Üí –ë–î –ø—É—Å—Ç–∞—è!**

### 3. –ü—Ä–æ–≤–µ—Ä—å –æ—Ç–≤–µ—Ç API

–û—Ç–∫—Ä–æ–π DevTools (F12) ‚Üí Network ‚Üí –Ω–∞–π–¥–∏ `analyze-voice` ‚Üí Response

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```json
{
  "top_similar_artists": [...],  // –ù–ï –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
  "recommended_songs": [...]      // –ù–ï –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
}
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è

```bash
cd backend
source venv/bin/activate

# 1. –û–±—Ä–∞–±–æ—Ç–∞–π –∞—Ä—Ç–∏—Å—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å –∞—É–¥–∏–æ –≤ backend/artist_vocals/)
python -m scripts.process_artists

# 2. –î–æ–±–∞–≤—å embeddings
python -m scripts.add_embeddings

# 3. –û–±—Ä–∞–±–æ—Ç–∞–π –ø–µ—Å–Ω–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ backend/songs/)
python -m scripts.process_songs

# 4. –û–±–Ω–æ–≤–∏ –∂–∞–Ω—Ä—ã
python -m scripts.update_genres
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –Ω–µ—Ç embeddings

```bash
cd backend
source venv/bin/activate

# –î–æ–±–∞–≤—å embeddings –¥–ª—è –≤—Å–µ—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤
python -m scripts.add_embeddings

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 10 (–¥–ª—è —Ç–µ—Å—Ç–∞)
python -m scripts.add_embeddings --limit 10
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä—å .env —Ñ–∞–π–ª
cat backend/.env | grep DATABASE_URL

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/edinorok
```

---

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –î–æ–±–∞–≤—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `backend/app/api/routes/analysis.py`

–ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 102 –¥–æ–±–∞–≤—å:
```python
print(f"[DEBUG] üîç –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∞—Ä—Ç–∏—Å—Ç–æ–≤: {len(artist_profiles)}")
print(f"[DEBUG] üîç –ê—Ä—Ç–∏—Å—Ç–æ–≤ —Å embeddings: {sum(1 for a in artist_profiles if a.voice_embedding)}")
print(f"[DEBUG] üîç –ó–∞–≥—Ä—É–∂–µ–Ω–æ –ø–µ—Å–µ–Ω: {len(songs_with_artists)}")
```

–ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 178 –¥–æ–±–∞–≤—å:
```python
print(f"[DEBUG] üîç –†–µ–∑—É–ª—å—Ç–∞—Ç pipeline:")
print(f"  - –ü–æ—Ö–æ–∂–∏—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤: {len(result.similar_artists)}")
print(f"  - –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Å–µ–Ω: {len(result.recommended_songs)}")
```

### –ü—Ä–æ–≤–µ—Ä—å frontend

–í `frontend/src/components/LiveVoiceAnalyzer.jsx` –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 465:
```jsx
console.log('üîç Analysis result:', result);
console.log('üîç Similar artists:', result.top_similar_artists);
console.log('üîç Recommended songs:', result.recommended_songs);
```

---

## üìä –ß–µ–∫–ª–∏—Å—Ç

- [ ] –í –ë–î –µ—Å—Ç—å –∞—Ä—Ç–∏—Å—Ç—ã: `SELECT COUNT(*) FROM artist_profiles;` > 0
- [ ] –£ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –µ—Å—Ç—å embeddings: `SELECT COUNT(*) FROM artist_profiles WHERE voice_embedding IS NOT NULL;` > 0
- [ ] –í –ë–î –µ—Å—Ç—å –ø–µ—Å–Ω–∏: `SELECT COUNT(*) FROM songs;` > 0
- [ ] Backend –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8086`
- [ ] –í –ª–æ–≥–∞—Ö backend –≤–∏–¥–Ω–æ "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ X –∞—Ä—Ç–∏—Å—Ç–æ–≤" (X > 0)
- [ ] API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã `top_similar_artists` –∏ `recommended_songs`
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ—Ç –æ—à–∏–±–æ–∫ JavaScript

---

## üö® –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã (90% —Å–ª—É—á–∞–µ–≤)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è –∏–ª–∏ —É –∞—Ä—Ç–∏—Å—Ç–æ–≤ –Ω–µ—Ç embeddings.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd backend
source venv/bin/activate
python -m scripts.process_artists  # –ï—Å–ª–∏ –µ—Å—Ç—å –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã
python -m scripts.add_embeddings   # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
python -m scripts.process_songs     # –ï—Å–ª–∏ –µ—Å—Ç—å –ø–µ—Å–Ω–∏
```

---

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. `–ê–†–•–ò–¢–ï–ö–¢–£–†–ê_–ò_–ë–ò–ë–õ–ò–û–¢–ï–ö–ò.md`
