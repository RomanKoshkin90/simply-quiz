# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Edinorok

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏–∑–∞ –≥–æ–ª–æ—Å–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–æ–±—â–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. [Backend (FastAPI)](#backend-fastapi)
3. [Frontend (React + Vite)](#frontend-react--vite)
4. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
5. [–ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞ –≥–æ–ª–æ—Å–∞](#–ø—Ä–æ—Ü–µ—Å—Å-–∞–Ω–∞–ª–∏–∑–∞-–≥–æ–ª–æ—Å–∞)
6. [–ü–æ—á–µ–º—É –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –±–ª–æ–∫–∏ "–ü–æ—Ö–æ–∂–∏–µ –∞—Ä—Ç–∏—Å—Ç—ã" –∏ "–ü–æ—Ö–æ–∂–∏–µ –ø–µ—Å–Ω–∏"](#–ø—Ä–æ–±–ª–µ–º—ã-–∏-—Ä–µ—à–µ–Ω–∏—è)

---

## üèõÔ∏è –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> ‚îÇ   Backend    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> ‚îÇ  PostgreSQL ‚îÇ
‚îÇ  (React)    ‚îÇ  HTTP   ‚îÇ  (FastAPI)   ‚îÇ  SQL    ‚îÇ   Database  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     Port 5173              Port 8086              Port 5432
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **Frontend** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Vite
2. **Backend** - FastAPI —Å–µ—Ä–≤–µ—Ä
3. **Database** - PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ç–∏—Å—Ç–æ–≤, –ø–µ—Å–µ–Ω –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
4. **Audio Processing** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤ (CREPE, OpenSMILE, OpenAI)

---

## üîß Backend (FastAPI)

### –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

#### 1. **Web Framework**
- **`fastapi==0.109.0`** - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Python
- **`uvicorn[standard]==0.27.0`** - ASGI —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ FastAPI
- **`pydantic==2.5.3`** - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º—ã
- **`python-multipart==0.0.6`** - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **`aiofiles==23.2.1`** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

#### 2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
- **`sqlalchemy==2.0.25`** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **`asyncpg==0.29.0`** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- **`alembic==1.13.1`** - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

#### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ**
- **`librosa==0.10.1`** - –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞—É–¥–∏–æ
- **`soundfile==0.12.1`** - –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤
- **`numpy==1.26.3`** - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–∞—Å—Å–∏–≤–∞–º–∏
- **`scipy==1.11.4`** - –ù–∞—É—á–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

#### 4. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –≥–æ–ª–æ—Å–∞**
- **`crepe==0.0.16`** - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ pitch (—á–∞—Å—Ç–æ—Ç—ã –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–æ–Ω–∞)
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –≥–æ–ª–æ—Å–∞
  - –ú–æ–¥–µ–ª—å: `tiny` (–±—ã—Å—Ç—Ä–∞—è) –∏–ª–∏ `full` (—Ç–æ—á–Ω–∞—è)
- **`tensorflow==2.15.0`** - –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è CREPE
- **`opensmile==2.5.0`** - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–º–±—Ä–∞ (–∞–∫—É—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫)
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç 88+ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (jitter, shimmer, HNR, —Ñ–æ—Ä–º–∞–Ω—Ç—ã –∏ —Ç.–¥.)

#### 5. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**
- **`scikit-learn==1.4.0`** - Cosine similarity –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤
- **`openai==1.10.0`** - OpenAI Whisper –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ voice embeddings

#### 6. **–í–Ω–µ—à–Ω–∏–µ API**
- **`yandex-music>=2.3.0`** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–æ–π
- **`httpx==0.26.0`** - HTTP –∫–ª–∏–µ–Ω—Ç
- **`httpx-socks==0.8.0`** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SOCKS5 –ø—Ä–æ–∫—Å–∏ –¥–ª—è OpenAI

---

## üé® Frontend (React + Vite)

### –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

#### 1. **React**
- **`react==18.2.0`** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **`react-dom==18.2.0`** - –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ React –≤ DOM

#### 2. **UI –∏ –∞–Ω–∏–º–∞—Ü–∏–∏**
- **`framer-motion==11.0.3`** - –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- **`lucide-react==0.312.0`** - –ò–∫–æ–Ω–∫–∏

#### 3. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤**
- **`react-dropzone==14.2.3`** - Drag & drop –∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ

#### 4. **–°–±–æ—Ä–∫–∞**
- **`vite==5.0.12`** - –ë—ã—Å—Ç—Ä—ã–π —Å–±–æ—Ä—â–∏–∫ –∏ dev-—Å–µ—Ä–≤–µ—Ä
- **`tailwindcss==3.4.1`** - CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å—Ç–∏–ª–µ–π
- **`autoprefixer==10.4.17`** - –ê–≤—Ç–æ–ø—Ä–µ—Ñ–∏–∫—Å—ã CSS

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã:

#### 1. **`artist_profiles`**
–•—Ä–∞–Ω–∏—Ç –ø—Ä–æ—Ñ–∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤ —Å –∏—Ö –≥–æ–ª–æ—Å–æ–≤—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏:
- `id` - ID –∞—Ä—Ç–∏—Å—Ç–∞
- `name` - –ò–º—è –∞—Ä—Ç–∏—Å—Ç–∞
- `genre` - –ñ–∞–Ω—Ä
- `voice_type` - –¢–∏–ø –≥–æ–ª–æ—Å–∞ (bass, tenor, soprano –∏ —Ç.–¥.)
- `min_pitch_hz`, `max_pitch_hz`, `median_pitch_hz` - –î–∏–∞–ø–∞–∑–æ–Ω —á–∞—Å—Ç–æ—Ç
- `timbre_features` - JSON —Å —Ç–µ–º–±—Ä–∞–ª—å–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- `voice_embedding` - JSON –º–∞—Å—Å–∏–≤ —Å embedding –≤–µ–∫—Ç–æ—Ä–æ–º

#### 2. **`songs`**
–•—Ä–∞–Ω–∏—Ç –ø–µ—Å–Ω–∏ —Å –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏:
- `id` - ID –ø–µ—Å–Ω–∏
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏
- `artist_id` - –°–≤—è–∑—å —Å –∞—Ä—Ç–∏—Å—Ç–æ–º
- `min_pitch_hz`, `max_pitch_hz` - –î–∏–∞–ø–∞–∑–æ–Ω —á–∞—Å—Ç–æ—Ç –ø–µ—Å–Ω–∏
- `difficulty` - –°–ª–æ–∂–Ω–æ—Å—Ç—å (1-5 –∑–≤–µ–∑–¥)
- `yandex_music_id`, `yandex_music_url` - –°—Å—ã–ª–∫–∏ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫—É

#### 3. **`voice_analysis_results`**
–•—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- `session_id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–µ—Å—Å–∏–∏
- `min_pitch_hz`, `max_pitch_hz` - –î–∏–∞–ø–∞–∑–æ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `timbre_features` - –¢–µ–º–±—Ä–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- `voice_embedding` - Embedding –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `similar_artists` - JSON –º–∞—Å—Å–∏–≤ –ø–æ—Ö–æ–∂–∏—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤
- `recommended_songs` - JSON –º–∞—Å—Å–∏–≤ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Å–µ–Ω

---

## üé§ –ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞ –≥–æ–ª–æ—Å–∞

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Frontend ‚Üí POST /api/upload-audio
‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ backend/uploads/{session_id}.mp3
```

### –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ –≥–æ–ª–æ—Å–∞
```
Frontend ‚Üí POST /api/analyze-voice?session_id=...
```

Backend –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

#### 2.1. **–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ** (`AudioPreprocessor`)
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ `librosa.load()`
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏
- –†–µ—Å–µ–º–ø–ª–∏–Ω–≥ –¥–æ 16kHz (–¥–ª—è CREPE)
- –û–±—Ä–µ–∑–∫–∞ —Ç–∏—à–∏–Ω—ã

#### 2.2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ pitch** (`PitchExtractor`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **CREPE** (–Ω–µ–π—Ä–æ—Å–µ—Ç—å)
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á–∞—Å—Ç–æ—Ç—É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–æ–Ω–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞
- –í—ã—á–∏—Å–ª—è–µ—Ç: min, max, median, std pitch
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –≥–æ–ª–æ—Å–∞ (bass, tenor, soprano –∏ —Ç.–¥.)

#### 2.3. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–º–±—Ä–∞** (`TimbreExtractor`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **OpenSMILE**
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç 88+ –∞–∫—É—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:
  - **Jitter** - –≤–∞—Ä–∏–∞—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã
  - **Shimmer** - –≤–∞—Ä–∏–∞—Ü–∏—è –∞–º–ø–ª–∏—Ç—É–¥—ã
  - **HNR** - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≥–∞—Ä–º–æ–Ω–∏–∫ –∫ —à—É–º—É
  - **–§–æ—Ä–º–∞–Ω—Ç—ã** (F1, F2, F3) - —Ä–µ–∑–æ–Ω–∞–Ω—Å–Ω—ã–µ —á–∞—Å—Ç–æ—Ç—ã
  - **Spectral flux** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–ø–µ–∫—Ç—Ä–∞

#### 2.4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è embedding** (`VoiceEmbeddingGenerator`)
- **–í–∞—Ä–∏–∞–Ω—Ç 1:** OpenAI Whisper (–µ—Å–ª–∏ `USE_OPENAI_FOR_USER_ANALYSIS=True`)
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—É–¥–∏–æ –≤ OpenAI API
  - –ü–æ–ª—É—á–∞–µ—Ç embedding –≤–µ–∫—Ç–æ—Ä (1536 —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏)
- **–í–∞—Ä–∏–∞–Ω—Ç 2:** –õ–æ–∫–∞–ª—å–Ω—ã–π embedding (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç pitch –∏ timbre features
  - –°–æ–∑–¥–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –º–µ–Ω—å—à–µ–π —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏

#### 2.5. **–ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤** (`SimilarityEngine.find_similar_artists`)
```python
# –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏–∑ –ë–î
artists = db.query(ArtistProfile).all()

# –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞—Ä—Ç–∏—Å—Ç–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç similarity:
similarity = compute_combined_similarity(
    user_embedding,      # Embedding –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_min_pitch,      # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_max_pitch,      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_timbre,         # –¢–µ–º–±—Ä–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    artist_data          # –î–∞–Ω–Ω—ã–µ –∞—Ä—Ç–∏—Å—Ç–∞
)

# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç 3 —Ñ–∞–∫—Ç–æ—Ä–∞:
# 1. Embedding similarity (50%) - cosine similarity –º–µ–∂–¥—É –≤–µ–∫—Ç–æ—Ä–∞–º–∏
# 2. Pitch overlap (30%) - –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ —á–∞—Å—Ç–æ—Ç
# 3. Timbre similarity (20%) - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–º–±—Ä–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
```

#### 2.6. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–µ—Å–µ–Ω** (`SimilarityEngine.recommend_songs`)
```python
# –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –ø–µ—Å–Ω–∏ –∏–∑ –ë–î
songs = db.query(Song).all()

# –î–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Å–Ω–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç pitch_match_score:
score = compute_pitch_overlap(
    user_min_pitch,
    user_max_pitch,
    song.min_pitch_hz,
    song.max_pitch_hz
)

# –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ score –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ø-10
```

### –®–∞–≥ 3: –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```json
{
  "session_id": "...",
  "pitch_analysis": {
    "min_pitch_hz": 150.0,
    "max_pitch_hz": 400.0,
    "detected_voice_type": "tenor"
  },
  "timbre_features": {...},
  "top_similar_artists": [
    {
      "artist_id": 1,
      "name": "–ê–¥–µ–ª–µ",
      "similarity_score": 87.5
    }
  ],
  "recommended_songs": [
    {
      "song_id": 1,
      "title": "Hello",
      "artist_name": "–ê–¥–µ–ª–µ",
      "pitch_match_score": 85.0
    }
  ]
}
```

---

## ‚ö†Ô∏è –ü–æ—á–µ–º—É –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –±–ª–æ–∫–∏ "–ü–æ—Ö–æ–∂–∏–µ –∞—Ä—Ç–∏—Å—Ç—ã" –∏ "–ü–æ—Ö–æ–∂–∏–µ –ø–µ—Å–Ω–∏"

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ PostgreSQL
psql -U postgres -d edinorok

# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä—Ç–∏—Å—Ç–æ–≤
SELECT COUNT(*) FROM artist_profiles;

# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Å–µ–Ω
SELECT COUNT(*) FROM songs;

# –ü—Ä–æ–≤–µ—Ä—å –µ—Å—Ç—å –ª–∏ —É –∞—Ä—Ç–∏—Å—Ç–æ–≤ embeddings
SELECT id, name, 
       CASE WHEN voice_embedding IS NULL THEN '–ù–ï–¢' ELSE '–ï–°–¢–¨' END as has_embedding,
       CASE WHEN timbre_features IS NULL THEN '–ù–ï–¢' ELSE '–ï–°–¢–¨' END as has_timbre
FROM artist_profiles
LIMIT 10;
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `COUNT(*) = 0` –∏–ª–∏ –≤—Å–µ `has_embedding = '–ù–ï–¢'`, —Ç–æ –∞—Ä—Ç–∏—Å—Ç—ã –Ω–µ –±—É–¥—É—Ç –Ω–∞–π–¥–µ–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û–±—Ä–∞–±–æ—Ç–∞–π –∞—Ä—Ç–∏—Å—Ç–æ–≤
cd backend
source venv/bin/activate
python -m scripts.process_artists

# –î–æ–±–∞–≤—å embeddings
python -m scripts.add_embeddings
```

#### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ backend**

–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –≥–æ–ª–æ—Å–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
```
[ANALYSIS] üìä –ó–∞–≥—Ä—É–∂–∞—é –ø—Ä–æ—Ñ–∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏–∑ –ë–î...
[ANALYSIS] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 130 –∞—Ä—Ç–∏—Å—Ç–æ–≤
[PIPELINE] 5Ô∏è‚É£ –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤...
[PIPELINE] ‚úÖ –ê—Ä—Ç–∏—Å—Ç—ã: 3, –ü–µ—Å–Ω–∏: 10
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –≤–∏–¥–∏—à—å `‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 0 –∞—Ä—Ç–∏—Å—Ç–æ–≤`, –∑–Ω–∞—á–∏—Ç –ë–î –ø—É—Å—Ç–∞—è.

#### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ API –æ—Ç–≤–µ—Ç–∞**

–û—Ç–∫—Ä–æ–π DevTools –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12) ‚Üí Network ‚Üí –Ω–∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å `/api/analyze-voice`

–ü—Ä–æ–≤–µ—Ä—å –æ—Ç–≤–µ—Ç:
```json
{
  "top_similar_artists": [],  // ‚ùå –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
  "recommended_songs": []      // ‚ùå –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã.

#### 4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –≤ `analysis.py`**

–í —Ñ–∞–π–ª–µ `backend/app/api/routes/analysis.py` —Å—Ç—Ä–æ–∫–∏ 100-139:

```python
# –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤
artists_result = await db.execute(select(ArtistProfile))
artist_profiles = artists_result.scalars().all()

# –ï—Å–ª–∏ artist_profiles –ø—É—Å—Ç–æ–π, —Ç–æ:
artists_data = []  # ‚ùå –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫

# –í pipeline.py —Å—Ç—Ä–æ–∫–∞ 161:
if artists_data:  # ‚ùå False, –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π
    similar_artists = self.similarity_engine.find_similar_artists(...)
else:
    similar_artists = []  # ‚ùå –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `artists_data` –∏–ª–∏ `songs_data` –ø—É—Å—Ç—ã–µ, —Ç–æ –±–ª–æ–∫–∏ –Ω–µ –ø–æ—è–≤—è—Ç—Å—è.

---

## üîß –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
cd backend
source venv/bin/activate

# 1. –û–±—Ä–∞–±–æ—Ç–∞–π –∞—Ä—Ç–∏—Å—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã –≤ backend/artist_vocals/)
python -m scripts.process_artists

# 2. –î–æ–±–∞–≤—å embeddings (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ OpenAI)
python -m scripts.add_embeddings --limit 10

# 3. –û–±—Ä–∞–±–æ—Ç–∞–π –ø–µ—Å–Ω–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ backend/songs/)
python -m scripts.process_songs

# 4. –û–±–Ω–æ–≤–∏ –∂–∞–Ω—Ä—ã
python -m scripts.update_genres
```

### –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä—å .env —Ñ–∞–π–ª
cat backend/.env | grep DATABASE_URL

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/edinorok
```

### –†–µ—à–µ–Ω–∏–µ 3: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í `backend/app/api/routes/analysis.py` –¥–æ–±–∞–≤—å:

```python
print(f"[ANALYSIS] üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö:")
print(f"  - –ê—Ä—Ç–∏—Å—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: {len(artists_data)}")
print(f"  - –ü–µ—Å–µ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω–æ: {len(songs_data)}")
print(f"  - –ê—Ä—Ç–∏—Å—Ç—ã —Å embeddings: {sum(1 for a in artists_data if a.get('voice_embedding'))}")
```

### –†–µ—à–µ–Ω–∏–µ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å frontend

–í `frontend/src/components/AnalysisResults.jsx` —Å—Ç—Ä–æ–∫–∏ 139-148:

```jsx
{top_similar_artists.length > 0 ? (
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞—Ä—Ç–∏—Å—Ç–æ–≤
) : (
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º "–ü–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö"
)}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `top_similar_artists` –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ:
```jsx
console.log('Analysis data:', data);
console.log('Similar artists:', data.top_similar_artists);
console.log('Recommended songs:', data.recommended_songs);
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### ArtistMatch (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤)
```python
{
    "artist_id": 1,
    "name": "–ê–¥–µ–ª–µ",
    "similarity_score": 87.5,  # 0-100%
    "voice_type": "mezzo-soprano",
    "genre": "pop",
    "pitch_overlap": 85.0
}
```

### SongMatch (—Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–µ—Å–µ–Ω)
```python
{
    "song_id": 1,
    "title": "Hello",
    "artist_name": "–ê–¥–µ–ª–µ",
    "pitch_match_score": 85.0,  # 0-100%
    "difficulty": 4  # 1-5 –∑–≤–µ–∑–¥
}
```

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä—å –ë–î
```sql
SELECT 
    (SELECT COUNT(*) FROM artist_profiles) as artists_count,
    (SELECT COUNT(*) FROM songs) as songs_count,
    (SELECT COUNT(*) FROM artist_profiles WHERE voice_embedding IS NOT NULL) as artists_with_embedding;
```

### 2. –ü—Ä–æ–≤–µ—Ä—å API
```bash
curl http://localhost:8086/api/analyze-voice?session_id=test
```

### 3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω backend
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:
[ANALYSIS] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ X –∞—Ä—Ç–∏—Å—Ç–æ–≤
[PIPELINE] ‚úÖ –ê—Ä—Ç–∏—Å—Ç—ã: 3, –ü–µ—Å–Ω–∏: 10
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞

- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- [ ] –¢–∞–±–ª–∏—Ü—ã `artist_profiles` –∏ `songs` –Ω–µ –ø—É—Å—Ç—ã–µ
- [ ] –£ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –µ—Å—Ç—å `voice_embedding` –∏ `timbre_features`
- [ ] Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8086
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5173
- [ ] API endpoint `/api/analyze-voice` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –í –ª–æ–≥–∞—Ö backend –≤–∏–¥–Ω–æ "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ X –∞—Ä—Ç–∏—Å—Ç–æ–≤"
- [ ] –í –ª–æ–≥–∞—Ö backend –≤–∏–¥–Ω–æ "‚úÖ –ê—Ä—Ç–∏—Å—Ç—ã: 3, –ü–µ—Å–Ω–∏: 10"

---

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å –æ—Ç–≤–µ—Ç API

–û—Ç–∫—Ä–æ–π DevTools (F12) ‚Üí Network ‚Üí –Ω–∞–π–¥–∏ –∑–∞–ø—Ä–æ—Å `analyze-voice` ‚Üí Response

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "top_similar_artists": [
    {
      "artist_id": 1,
      "name": "–ê–¥–µ–ª–µ",
      "similarity_score": 87.5
    }
  ],
  "recommended_songs": [
    {
      "song_id": 1,
      "title": "Hello",
      "artist_name": "–ê–¥–µ–ª–µ"
    }
  ]
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤—ã –ø—É—Å—Ç—ã–µ `[]`, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ backend.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω backend –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:

```
[ANALYSIS] üìä –ó–∞–≥—Ä—É–∂–∞—é –ø—Ä–æ—Ñ–∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏–∑ –ë–î...
[ANALYSIS] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 130 –∞—Ä—Ç–∏—Å—Ç–æ–≤ (0.5s)
[ANALYSIS] üìä –ó–∞–≥—Ä—É–∂–∞—é –ø–µ—Å–Ω–∏ –∏–∑ –ë–î...
[ANALYSIS] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 50 –ø–µ—Å–µ–Ω (0.2s)
[PIPELINE] 5Ô∏è‚É£ –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤...
[PIPELINE] ‚úÖ –ê—Ä—Ç–∏—Å—Ç—ã: 3, –ü–µ—Å–Ω–∏: 10
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –≤–∏–¥–∏—à—å `‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 0 –∞—Ä—Ç–∏—Å—Ç–æ–≤` ‚Üí –ë–î –ø—É—Å—Ç–∞—è.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å SQL –∑–∞–ø—Ä–æ—Å—ã

–í `backend/app/api/routes/analysis.py` —Å—Ç—Ä–æ–∫–∏ 100-139:

```python
# –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞—Ä—Ç–∏—Å—Ç–æ–≤
artists_result = await db.execute(select(ArtistProfile))
artist_profiles = artists_result.scalars().all()

print(f"[DEBUG] –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∞—Ä—Ç–∏—Å—Ç–æ–≤: {len(artist_profiles)}")  # –î–æ–±–∞–≤—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É

# –ï—Å–ª–∏ artist_profiles –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫, —Ç–æ:
artists_data = []  # ‚ùå –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫

# –í pipeline.py —Å—Ç—Ä–æ–∫–∞ 161:
if artists_data:  # ‚ùå False, –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π
    similar_artists = self.similarity_engine.find_similar_artists(...)
else:
    similar_artists = []  # ‚ùå –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
print(f"[DEBUG] artists_data length: {len(artists_data)}")
print(f"[DEBUG] songs_data length: {len(songs_data)}")
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å frontend –∫–æ–Ω—Å–æ–ª—å

–û—Ç–∫—Ä–æ–π DevTools (F12) ‚Üí Console

–î–æ–±–∞–≤—å –≤ `LiveVoiceAnalyzer.jsx` –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 465:
```jsx
console.log('üîç Analysis result:', result);
console.log('üîç Similar artists:', result.top_similar_artists);
console.log('üîç Recommended songs:', result.recommended_songs);
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–∏—à—å `[]` ‚Üí API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã.

---

## üõ†Ô∏è –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ï—Å–ª–∏ –ë–î –ø—É—Å—Ç–∞—è:

```bash
cd backend
source venv/bin/activate

# 1. –ü—Ä–æ–≤–µ—Ä—å –µ—Å—Ç—å –ª–∏ –∞—Ä—Ç–∏—Å—Ç—ã –≤ –ë–î
python -c "
import asyncio
from app.db.database import get_db
from app.db.models import ArtistProfile
from sqlalchemy import select

async def check():
    async for session in get_db():
        result = await session.execute(select(ArtistProfile))
        artists = result.scalars().all()
        print(f'–ê—Ä—Ç–∏—Å—Ç–æ–≤ –≤ –ë–î: {len(artists)}')
        if len(artists) > 0:
            print(f'–ü–µ—Ä–≤—ã–π –∞—Ä—Ç–∏—Å—Ç: {artists[0].name}')
            print(f'Has embedding: {artists[0].voice_embedding is not None}')
        break

asyncio.run(check())
"

# 2. –ï—Å–ª–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –Ω–µ—Ç - –æ–±—Ä–∞–±–æ—Ç–∞–π –∏—Ö
python -m scripts.process_artists

# 3. –î–æ–±–∞–≤—å embeddings
python -m scripts.add_embeddings

# 4. –û–±—Ä–∞–±–æ—Ç–∞–π –ø–µ—Å–Ω–∏
python -m scripts.process_songs
```

### –ï—Å–ª–∏ –∞—Ä—Ç–∏—Å—Ç—ã –µ—Å—Ç—å, –Ω–æ embeddings –Ω–µ—Ç:

```bash
# –î–æ–±–∞–≤—å embeddings –¥–ª—è –≤—Å–µ—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤
python -m scripts.add_embeddings

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 10 (–¥–ª—è —Ç–µ—Å—Ç–∞)
python -m scripts.add_embeddings --limit 10
```

### –ï—Å–ª–∏ –≤—Å—ë –µ—Å—Ç—å, –Ω–æ –±–ª–æ–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** - –º–æ–≥—É—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∏ JavaScript
2. **–ü—Ä–æ–≤–µ—Ä—å Network tab** - –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∞ 500 –æ—Ç API
3. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend** - –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ similarity

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞

- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- [ ] –¢–∞–±–ª–∏—Ü—ã `artist_profiles` –∏ `songs` –Ω–µ –ø—É—Å—Ç—ã–µ
- [ ] –£ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –µ—Å—Ç—å `voice_embedding` –∏ `timbre_features`
- [ ] Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8086
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5173
- [ ] API endpoint `/api/analyze-voice` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –í –ª–æ–≥–∞—Ö backend –≤–∏–¥–Ω–æ "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ X –∞—Ä—Ç–∏—Å—Ç–æ–≤"
- [ ] –í –ª–æ–≥–∞—Ö backend –≤–∏–¥–Ω–æ "‚úÖ –ê—Ä—Ç–∏—Å—Ç—ã: 3, –ü–µ—Å–Ω–∏: 10"
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ—Ç –æ—à–∏–±–æ–∫ JavaScript
- [ ] –í Network tab –∑–∞–ø—Ä–æ—Å `analyze-voice` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK

---

**–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –Ω–æ –±–ª–æ–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è - –ø—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –æ—à–∏–±–∫–∏ JavaScript!**

---

## üéØ –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è** (90% —Å–ª—É—á–∞–µ–≤)
   - –†–µ—à–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏ `python -m scripts.process_artists`

2. **–£ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –Ω–µ—Ç embeddings** (5% —Å–ª—É—á–∞–µ–≤)
   - –†–µ—à–µ–Ω–∏–µ: –ó–∞–ø—É—Å—Ç–∏ `python -m scripts.add_embeddings`

3. **–û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ similarity_engine** (3% —Å–ª—É—á–∞–µ–≤)
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend –Ω–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

4. **–ü—Ä–æ–±–ª–µ–º–∞ —Å frontend** (2% —Å–ª—É—á–∞–µ–≤)
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. **–°–æ–±–µ—Ä–∏ –ª–æ–≥–∏:**
   ```bash
   # Backend –ª–æ–≥–∏
   tail -n 100 logs/backend.log > debug_backend.txt
   
   # SQL –∑–∞–ø—Ä–æ—Å—ã
   # –í–∫–ª—é—á–∏ SQL logging –≤ config.py
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å –¥–∞–Ω–Ω—ã–µ:**
   ```sql
   SELECT 
       COUNT(*) as total_artists,
       COUNT(voice_embedding) as artists_with_embedding,
       COUNT(timbre_features) as artists_with_timbre
   FROM artist_profiles;
   ```

3. **–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:**
   ```bash
   curl -X POST "http://localhost:8086/api/v1/analyze-voice?session_id=test" \
        -H "Content-Type: application/json" | jq '.top_similar_artists'
   ```
